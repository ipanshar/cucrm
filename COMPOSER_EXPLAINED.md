# –ó–∞—á–µ–º –Ω—É–∂–µ–Ω composer.json?

## üéØ –û—Ç–≤–µ—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å: "–ü–æ—á–µ–º—É –Ω–µ —Å–æ–∑–¥–∞–ª —Ñ–∞–π–ª –¥–ª—è composer?"

**–Ø –Ω–µ —Å–æ–∑–¥–∞–ª –µ–≥–æ –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ, –ø–æ—Ç–æ–º—É —á—Ç–æ:**
1. –í –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ –≥–æ—Ç–æ–≤—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤ EspoCRM `composer.json` —É–∂–µ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç
2. –£ –≤–∞—Å –±—ã–ª–∞ –ø–∞–ø–∫–∞ `vendor/` —Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–º–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏
3. –Ø –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–ª, —á—Ç–æ —Ñ–∞–π–ª –±—ã–ª –ø—Ä–æ—Å—Ç–æ –ø—Ä–æ–∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω –∏–ª–∏ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –¥—Ä—É–≥–æ–º –º–µ—Å—Ç–µ

**–ù–æ —Ç–µ–ø–µ—Ä—å `composer.json` –°–û–ó–î–ê–ù –∏ —ç—Ç–æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–æ!** ‚úÖ

---

## üì¶ –ß—Ç–æ –¥–∞–µ—Ç composer.json?

### 1. **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏**
```json
{
  "require": {
    "php": "^8.0",
    "guzzlehttp/guzzle": "^7.5",
    "monolog/monolog": "^3.3"
  }
}
```
–û–ø–∏—Å—ã–≤–∞–µ—Ç –≤—Å–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω—ã –ø—Ä–æ–µ–∫—Ç—É.

### 2. **–í–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º–æ—Å—Ç—å —Å–±–æ—Ä–∫–∏**
–î—Ä—É–≥–∏–µ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ –º–æ–≥—É—Ç —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å **—Ç–æ—á–Ω–æ —Ç–∞–∫–∏–µ –∂–µ** –≤–µ—Ä—Å–∏–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫:
```bash
composer install
```

### 3. **–ê–≤—Ç–æ–∑–∞–≥—Ä—É–∑–∫–∞ –∫–ª–∞—Å—Å–æ–≤**
```json
{
  "autoload": {
    "psr-4": {
      "Espo\\": "application/Espo/"
    }
  }
}
```
–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç –∫–ª–∞—Å—Å—ã –ø—Ä–æ–µ–∫—Ç–∞.

### 4. **–°–∫—Ä–∏–ø—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏**
```json
{
  "scripts": {
    "post-install-cmd": ["@php rebuild.php"],
    "espo:clear-cache": ["@php clear_cache.php"]
  }
}
```

---

## üöÄ –ß—Ç–æ –¥–µ–ª–∞—Ç—å —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É –±–µ–∑ composer.json?

### ‚ùå –ë–ï–ó composer.json:
```bash
git clone <repo>
cd cucrm
# ??? –ö–∞–∫ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏?
# ??? –ö–∞–∫–∏–µ –≤–µ—Ä—Å–∏–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫ –Ω—É–∂–Ω—ã?
# ??? –ö–∞–∫–∞—è –≤–µ—Ä—Å–∏—è PHP —Ç—Ä–µ–±—É–µ—Ç—Å—è?
```
**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ, —á—Ç–æ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å!

### ‚úÖ –° composer.json:
```bash
git clone <repo>
cd cucrm
composer install  # ‚Üê –í—Å—ë —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏!
```

---

## üìä –ß—Ç–æ –≤—Ö–æ–¥–∏—Ç –≤ –≤–∞—à composer.json?

### –û—Å–Ω–æ–≤–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
- **PHP 8.0+** - –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è
- **Symfony** –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã - –¥–ª—è HTTP, –∫–æ–Ω—Å–æ–ª–∏
- **Doctrine DBAL** - –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ë–î
- **Monolog** - –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- **GuzzleHTTP** - HTTP –∫–ª–∏–µ–Ω—Ç
- **PHPOffice** - —Ä–∞–±–æ—Ç–∞ —Å Excel/Word
- **DomPDF** - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è PDF
- **OAuth2** - –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- –ò ~40 –¥—Ä—É–≥–∏—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫

### Autoload:
```json
"autoload": {
  "psr-4": {
    "Espo\\": "application/Espo/"
  },
  "classmap": [
    "application/Espo/Modules/",
    "custom/Espo/"
  ]
}
```

### –°–∫—Ä–∏–ø—Ç—ã:
```bash
# –ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏/–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
composer install  # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å—Ç–∏—Ç rebuild.php

# –û—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞
composer espo:clear-cache

# –ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞
composer espo:rebuild
```

---

## üîÑ –ß—Ç–æ —Ç–∞–∫–æ–µ composer.lock?

`composer.lock` - —Ñ–∞–π–ª —Å **—Ç–æ—á–Ω—ã–º–∏** –≤–µ—Ä—Å–∏—è–º–∏ –≤—Å–µ—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π:

```json
{
  "packages": [
    {
      "name": "guzzlehttp/guzzle",
      "version": "7.8.0",  ‚Üê –¢–æ—á–Ω–∞—è –≤–µ—Ä—Å–∏—è!
      "source": {...}
    }
  ]
}
```

### –ó–∞—á–µ–º –Ω—É–∂–µ–Ω composer.lock?

| –ë–µ–∑ composer.lock | –° composer.lock |
|-------------------|-----------------|
| –£ —Ä–∞–∑–Ω—ã—Ö —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –º–æ–≥—É—Ç –±—ã—Ç—å —Ä–∞–∑–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ | –í—Å–µ –ø–æ–ª—É—á–∞—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –≤–µ—Ä—Å–∏–∏ |
| `"guzzle": "^7.5"` = –º–æ–∂–µ—Ç –±—ã—Ç—å 7.5, 7.6, 7.9 | –¢–æ—á–Ω–∞—è –≤–µ—Ä—Å–∏—è: 7.8.0 |
| –ú–æ–≥—É—Ç –≤–æ–∑–Ω–∏–∫–Ω—É—Ç—å –Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ | –ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å |

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:
‚úÖ **–î–û–ë–ê–í–ò–¢–¨** `composer.lock` –≤ Git –¥–ª—è production –ø—Ä–æ–µ–∫—Ç–æ–≤  
‚ùå –ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å `composer.lock` —Ç–æ–ª—å–∫–æ –¥–ª—è –±–∏–±–ª–∏–æ—Ç–µ–∫ (packages)

---

## üìù –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–º–µ—Ä—ã

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ù–æ–≤—ã–π —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ –≤ –∫–æ–º–∞–Ω–¥–µ

**–ë–ï–ó composer.json:**
```bash
git clone <repo>
# –û—à–∏–±–∫–∞: Fatal error: Class 'GuzzleHttp\Client' not found
# –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ –Ω–µ –∑–Ω–∞–µ—Ç, —á—Ç–æ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å üò∞
```

**–° composer.json:**
```bash
git clone <repo>
composer install
# ‚úÖ –í—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã!
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏

```bash
# –û–±–Ω–æ–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ Guzzle
composer update guzzlehttp/guzzle

# –û–±–Ω–æ–≤–∏—Ç—å –≤—Å–µ
composer update

# –û–±–Ω–æ–≤–∏—Ç—å –∏ –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å –≤ composer.lock
git add composer.lock
git commit -m "Update dependencies"
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞ —É—è–∑–≤–∏–º–æ—Å—Ç–∏
composer audit

# –í—ã–≤–æ–¥:
Found 2 security vulnerability advisories affecting 1 package:
- guzzlehttp/guzzle: CVE-2023-XXXX
```

---

## ‚úÖ –ò—Ç–æ–≥

### –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ:
1. ‚úÖ –°–æ–∑–¥–∞–Ω `composer.json` —Å –ø–æ–ª–Ω—ã–º —Å–ø–∏—Å–∫–æ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
2. ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω autoload –¥–ª—è –∫–ª–∞—Å—Å–æ–≤ Espo
3. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–ª–µ–∑–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã
4. ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω `.gitignore` –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è `composer.lock`
5. ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å:
```bash
# 1. –î–æ–±–∞–≤–∏—Ç—å –≤ Git
git add composer.json
git commit -m "Add composer.json"

# 2. Push –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git push origin main
```

### –¢–µ–ø–µ—Ä—å –¥—Ä—É–≥–∏–µ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–º–æ–≥—É—Ç:
```bash
git clone https://github.com/ipanshar/cucrm.git
cd cucrm
composer install  # ‚Üê –ú–∞–≥–∏—è! –í—Å—ë —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è
./setup.bat       # ‚Üê –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
# –ì–æ—Ç–æ–≤–æ! üéâ
```

---

## üîó –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã Composer

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
composer install

# –û–±–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
composer update

# –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é –±–∏–±–ª–∏–æ—Ç–µ–∫—É
composer require vendor/package

# –£–¥–∞–ª–∏—Ç—å –±–∏–±–ª–∏–æ—Ç–µ–∫—É
composer remove vendor/package

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å
composer validate

# –ü–æ–∫–∞–∑–∞—Ç—å —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ –ø–∞–∫–µ—Ç—ã
composer outdated

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
composer audit

# –û–±–Ω–æ–≤–∏—Ç—å Composer
composer self-update

# –û—á–∏—Å—Ç–∏—Ç—å –∫—ç—à
composer clear-cache

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–∫—Ä–∏–ø—Ç
composer espo:clear-cache
composer espo:rebuild
```

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ

- [–û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Composer](https://getcomposer.org/doc/)
- [Packagist.org](https://packagist.org/) - —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π PHP –ø–∞–∫–µ—Ç–æ–≤
- [Semantic Versioning](https://semver.org/) - –∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
